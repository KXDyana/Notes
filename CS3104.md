# CS3104

 ## Introduction:

OS: program that manages computer hardware, also provides a basis for application programs as an intermediary between user and hardware.

User <--> Application/System <--> OS <--> Hardware(resource) 

### Functions of OS:
* interface
* resource allocation
* management of memory, security, etc.

### Main types of OS:
* Batch OS
* Time sharing OS
* Distributed OS
* Network OS
* Real Time OS 
* Multi programming/processing/tasking OS

### Goals of OS:
* Convenience
* Efficiency
* Both (most OS are designed for) 

## Basics

* A modern general-purpose computer system consists of one or more CPUs and a number of device controllers connected through a common bus that provides access to shared memory
* Each device controller is in charge of a specific type of device
* the CPU and the device conrollers can execute concurrently.
*  to ensure orderly access to the shared memory, there need to be a memory controller

### Important Terms
* Bootstrap Program: the initial program that runs when a computer is powered up or rebooted. 
    * stored in ROM
    * must know how to load the OS 
    * must locate and load the OS kernel into memory
* Interrupt: The occurence of an event is usually signalled by an interrupt from a hardware of software.
    * by sending a signal to the CPU (by using the system bus).
* System Call (Monitor Call): software triggers interrupt by using system calls.

When the CPU is interrupted, it stops what it is doing at the moment and immediately transfers execution to a fixed location (where contains the starting address where the service routine of the calling interrupt is located). On completion, the CPU resumes the interrupted computation. 



## Storage Structure

Registers
Cache
Main Memory
Electronic Disk
Magnetic Disk
Optical Disk
Magnetic Tapes

* Volatile: when power is removed, the contents stored loses
* Non-Volatile: retains its contents even when power is removed.

## I/O Structure

* I/O: giving input/getting output
* storage is only one of the many types of I/O devices within a computer
* A modern general-purpose computer system consists of multiple device controllers. Each device controller is in charge of a specific type of device.
* A device controller contains a local buffer storage and a set of specia purpose registers.
* OS have a device driver for each device controller. This driver understands the device controller and persents a uniform interface to the device to the rest of the OS.

### Working of an I/O Operation:
* the device driver loads the registers given by the device controller
* the device controller examines the contents ofthe registers to determine what action to take
* the controller starts to transfer data from the device to its buffer
* the controller informs the driver via an interrupt the the operation is finished
* the driver returns control to the OS.

This form of interrupt-driven I/O is fine for moving small amounts of data, but can produce high overhead when used for large data movement. To solved this, Direct Memory Access (DMA) is used.

* DMA: after setting up buffers, pointers, and counters for I/O device, the controller transfers an entire block of data directly to or from its own buffer storage to memory without interving CPU.

## Computer System Architecture
Types of computer systems based on the number of general purpose processors:
1. single process systems: one main CPU capable of executing a general purpose instruction set including instructions from user processes. Other special purpose processors are also present which perform device specific tasks (such as in a keyboard).
2. multiprocesor systems: also known as parallel systems or tightly coupled systems. Two or more processors in  close communication, sharing the computer bus and sometimes the clock, memory and devices.
    * increased throughput
    * economy of scale
    * increased reliability
3. clustered systems

## Structure

* multiprogramming: increases CPU utilisation by organiszing jobs so that CPU always has one to execute. 
* time sharing: CPU executes multiple jobs by switching among them. The switching occur frequently that the user can interact with each program while it is running.
    * each user has at least one separate program in memory
    * a program loaded into memory and executed is called a process

## Services:

An OS provides an enviroment for applications and programs.


* Command line Interface
* Graphical User Interface

* Program Execution

* I/O Operations

* File System Manipulation

* Communications (between processes)

* Error Detection

* Resource Allocation

* Accounting (keep track of usages)

* Protection and Security


## Interfaces:

### Command Line Interface (Command Interpreter)
allow users to directly enters commands that are to be performed by the OS
* some OS includes the CLI in the kernel. others such as windowsXP/UNIX, CLI is treated as a special program. 
* on some systems with multiple CLI to choose from, the CLI is know as shells. e.g.: bourne shell, C shell, Bourne-again shell(BASH), korn shell, etc. 
    * 1. the code of certain tasks (such as creating a file) is contained in the command interpreter.
    * 2. or,  the interpreter calls the program that can perform the task based on the command.


## System Calls:

System Calls provide an interface to the services made available by an OS.
System call is the programmatic way the program requests a service from the kernel of the OS. Available as routines written in C or C++

### Types of System Calls:

1. Process control
    * load and execute
    * end (halted) and abort when error occurs
    * create process, terminate process
    * get process attributs, set process attributes
    * wait for time
    * wait events, signal event
    * allocate and free memory

2. File Manipulation
    * create file and delete file
    * open and close file
    * read, write and reposition file
    * get and set file attributes

3. Device Management
    * request devices, release device
    * read, write, reposition
    * get and set device attributes
    * logically attach or detach devices

4. Information Maintenance
    * get and set time/date
    * get and set system data
    * get and set process, file and device attributes
    
5. Communications
    * create, delete connections between processes
    * send and recieve messages
    * transfer status information
    * attach or detach remote devices














































## File System:
Typically the most visible part of OS

1. a collection of files (each containing data)
2. a directory structure(which organises the files)

## File Attributes:

* Name
* Identifier
* Type
* Location
* Size
* Protection
* Time, Date, User Identification

## File Operations:

* Creating
* Writing
* Reading
* Repositioning within a file
* Deleting
* Truncating

## Open Files

* File pointer 
* File-open count
* Disk Location in the file
* Access Rights


Linux: everything is a file

## Types:

* Single-level: everyting has to be uniqie
* Two-level: each user has their own directory. Very secure.
* Tree-structred Directory: more like a modern directory, with root...etc. has a concept of a current directory. No concept of different users directory.
* acyclic directoy (more complicated tree directory) : no cycles, introduces shared files and folders. 